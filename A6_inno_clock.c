#include "config.h"

#include <stdlib.h>
#include <assert.h>
#include <fcntl.h>
#include <limits.h>
#include <unistd.h>
#include <stdbool.h>

#include "logging.h"
#include "miner.h"
#include "util.h"

#include "A6_inno_cmd.h"
#include "A6_inno_clock.h"

#if 1  //add by lzl 20180615
const int g_pll_list[PLL_LV_NUM] = {
    120, 
    125, 
    129, 
    140, 
    159, 
    171, 
    180, 
    189, 
    201, 
    210, 
    219, 
    231, 
    240, 
    249, 
    261, 
    270, 
    279, 
    291, 
    300, 
    312, 
    318, 
    330, 
    342, 
    348, 
    360, 
    372, 
    378, 
    390, 
    402, 
    408, 
    420, 
    432, 
    438, 
    450, 
    462, 
    468, 
    480, 
    492, 
    498, 
    510, 
    522, 
    528, 
    540, 
    552, 
    558, 
    570, 
    582, 
    588, 
    600, 
    612, 
    624, 
    630, 
    636, 
    648, 
    660, 
    672, 
    684, 
    690, 
    696, 
    708, 
    720, 
    732, 
    744, 
    750, 
    756, 
    768, 
    780, 
    792, 
    804, 
    810, 
    816, 
    828, 
    840, 
    852, 
    864, 
    870, 
    876, 
    888, 
    900, 
    912, 
    924, 
    930, 
    936, 
    948, 
    960, 
    972, 
    984, 
    990, 
    996, 
    1008,
    1020,
    1032,
    1044,
    1050,
    1056,
    1068,
    1080,
    1092,
    1104,
    1110,
    1116,
    1128,
    1140,
    1152,
    1164,
    1170,
    1176,
    1188,
    1200,
    1212,
    1224,
    1236,
    1248,
    1260,
    1272,
    1284,
    1296,
    1308,
    1320,
    1332,
    1344,
    1356,
    1368,
    1380,
    1392,
    1404,
    1416,
    1428,
    1440,
    1452,
    1464,
    1476,
    1488,
    1500,
    1512,
    1524,
    1536,
    1548,
    1560,
    1572,
    1584,
    1596
};   


struct PLL_Clock PLL_Clk_12Mhz[142]={
    {0,   120,  A4_PLL(1, 80, 3)}, //default
    {1,   125,  A4_PLL(1, 83, 3)}, //
    {2,   129,  A4_PLL(1, 86, 3)},
    {3,   140,  A4_PLL(1, 93, 3)},
    {4,   159,  A4_PLL(1, 53, 2)},
    {5,   171,  A4_PLL(1, 57, 2)},
    {6,   180,  A4_PLL(1, 60, 2)},
    {7,   189,  A4_PLL(1, 63, 2)},
    {8,   201,  A4_PLL(1, 67, 2)},
    {9,   210,  A4_PLL(1, 70, 2)},
    {10,  219,  A4_PLL(1, 73, 2)},
    {11,  231,  A4_PLL(1, 77, 2)},
    {12,  240,  A4_PLL(1, 80, 2)},
    {13,  249,  A4_PLL(1, 83, 2)},
    {14,  261,  A4_PLL(1, 87, 2)},
    {15,  270,  A4_PLL(1, 90, 2)},
    {16,  279,  A4_PLL(1, 93, 2)},
    {17,  291,  A4_PLL(1, 97, 2)},
    {18,  300,  A4_PLL(1, 50, 1)},
    {19,  312,  A4_PLL(1, 52, 1)},
    {20,  318,  A4_PLL(1, 53, 1)},
    {21,  330,  A4_PLL(1, 55, 1)},
    {22,  342,  A4_PLL(1, 57, 1)},
    {23,  348,  A4_PLL(1, 58, 1)},
    {24,  360,  A4_PLL(1, 60, 1)},
    {25,  372,  A4_PLL(1, 62, 1)},
    {26,  378,  A4_PLL(1, 63, 1)},
    {27,  390,  A4_PLL(1, 65, 1)},
    {28,  402,  A4_PLL(1, 67, 1)},
    {29,  408,  A4_PLL(1, 68, 1)},
    {30,  420,  A4_PLL(1, 70, 1)},
    {31,  432,  A4_PLL(1, 72, 1)},
    {32,  438,  A4_PLL(1, 73, 1)},
    {33,  450,  A4_PLL(1, 75, 1)},
    {34,  462,  A4_PLL(1, 77, 1)},
    {35,  468,  A4_PLL(1, 78, 1)},
    {36,  480,  A4_PLL(1, 80, 1)},
    {37,  492,  A4_PLL(1, 82, 1)},
    {38,  498,  A4_PLL(1, 83, 1)},
    {39,  510,  A4_PLL(1, 85, 1)},
    {40,  522,  A4_PLL(1, 87, 1)},
    {41,  528,  A4_PLL(1, 88, 1)},
    {42,  540,  A4_PLL(1, 90, 1)},
    {43,  552,  A4_PLL(1, 92, 1)},
    {44,  558,  A4_PLL(1, 93, 1)},
    {45,  570,  A4_PLL(1, 95, 1)},
    {46,  582,  A4_PLL(1, 97, 1)},
    {47,  588,  A4_PLL(1, 98, 1)},
    {48,  600,  A4_PLL(1, 50, 0)},
    {49,  612,  A4_PLL(1, 51, 0)},
    {50,  624,  A4_PLL(1, 52, 0)},
    {51,  630,  A4_PLL(2, 105,0)},
    {52,  636,  A4_PLL(1, 53, 0)},
    {53,  648,  A4_PLL(1, 54, 0)},
    {54,  660,  A4_PLL(1, 55, 0)},
    {55,  672,  A4_PLL(1, 56, 0)},
    {56,  684,  A4_PLL(1, 57, 0)},
    {57,  690,  A4_PLL(2, 115,0)},
    {58,  696,  A4_PLL(1, 58, 0)},
    {59,  708,  A4_PLL(1, 59, 0)},
    {60,  720,  A4_PLL(1, 60, 0)},
    {61,  732,  A4_PLL(1, 61, 0)},
    {62,  744,  A4_PLL(1, 62, 0)},
    {63,  750,  A4_PLL(2, 125,0)},
    {64,  756,  A4_PLL(1, 63, 0)},
    {65,  768,  A4_PLL(1, 64, 0)},
    {66,  780,  A4_PLL(1, 65, 0)},
    {67,  792,  A4_PLL(1, 66, 0)},
    {68,  804,  A4_PLL(1, 67, 0)},
    {69,  810,  A4_PLL(2, 135,0)},
    {70,  816,  A4_PLL(1, 68, 0)},
    {71,  828,  A4_PLL(1, 69, 0)},
    {72,  840,  A4_PLL(1, 70, 0)},
    {73,  852,  A4_PLL(1, 71, 0)},
    {74,  864,  A4_PLL(1, 72, 0)},
    {75,  870,  A4_PLL(2, 145,0)},
    {76,  876,  A4_PLL(1, 73, 0)},
    {77,  888,  A4_PLL(1, 74, 0)},
    {78,  900,  A4_PLL(1, 75, 0)},
    {79,  912,  A4_PLL(1, 76, 0)},
    {80,  924,  A4_PLL(1, 77, 0)},
    {81,  930,  A4_PLL(2, 155,0)},
    {82,  936,  A4_PLL(1, 78, 0)},
    {83,  948,  A4_PLL(1, 79, 0)},
    {84,  960,  A4_PLL(1, 80, 0)},
    {85,  972,  A4_PLL(1, 81, 0)},
    {86,  984,  A4_PLL(1, 82, 0)},
    {87,  990,  A4_PLL(2, 165,0)},
    {88,  996,  A4_PLL(1, 83, 0)},
    {89,  1008, A4_PLL(1, 84, 0)},
    {90,  1020, A4_PLL(1, 85, 0)},
    {91,  1032, A4_PLL(1, 86, 0)},
    {92,  1044, A4_PLL(1, 87, 0)},
    {93,  1050, A4_PLL(2, 175,0)},
    {94,  1056, A4_PLL(1, 88, 0)},
    {95,  1068, A4_PLL(1, 89, 0)},
    {96,  1080, A4_PLL(1, 90, 0)},
    {97,  1092, A4_PLL(1, 91, 0)},
    {98,  1104, A4_PLL(1, 92, 0)},
    {99,  1110, A4_PLL(2, 185,0)},
    {100, 1116, A4_PLL(1, 93, 0)},
    {101, 1128, A4_PLL(1, 94, 0)},
    {102, 1140, A4_PLL(1, 95, 0)},
    {103, 1152, A4_PLL(1, 96, 0)},
    {104, 1164, A4_PLL(1, 97, 0)},
    {105, 1170, A4_PLL(2, 195,0)},
    {106, 1176, A4_PLL(1, 98, 0)},
    {107, 1188, A4_PLL(1, 99, 0)},
    {108, 1200, A4_PLL(1, 100,0)},
    {109, 1212, A4_PLL(1, 101,0)},
    {110, 1224, A4_PLL(1, 102,0)},
    {111, 1236, A4_PLL(1, 103,0)},
    {112, 1248, A4_PLL(1, 104,0)},
    {113, 1260, A4_PLL(1, 105,0)},
    {114, 1272, A4_PLL(1, 106,0)},
    {115, 1284, A4_PLL(1, 107,0)},
    {116, 1296, A4_PLL(1, 108,0)},
    {117, 1308, A4_PLL(1, 109,0)},
    {118, 1320, A4_PLL(2, 110,0)},
    {119, 1332, A4_PLL(1, 111,0)},
    {120, 1344, A4_PLL(1, 112,0)},
    {121, 1356, A4_PLL(1, 113,0)},
    {122, 1368, A4_PLL(1, 114,0)},
    {123, 1380, A4_PLL(1, 115,0)},
    {124, 1392, A4_PLL(2, 116,0)},
    {125, 1404, A4_PLL(1, 117,0)},
    {126, 1416, A4_PLL(1, 118,0)},
    {127, 1428, A4_PLL(1, 119,0)},
    {128, 1440, A4_PLL(1, 120,0)},
    {129, 1452, A4_PLL(1, 121,0)},
    {130, 1464, A4_PLL(1, 122,0)},
    {131, 1476, A4_PLL(1, 123,0)},
    {132, 1488, A4_PLL(1, 124,0)},
    {133, 1500, A4_PLL(1, 125,0)},
    {134, 1512, A4_PLL(1, 126,0)},
    {135, 1524, A4_PLL(1, 127,0)},
    {136, 1536, A4_PLL(1, 128,0)},
    {137, 1548, A4_PLL(1, 129,0)},
    {138, 1560, A4_PLL(1, 130,0)},
    {139, 1572, A4_PLL(1, 131,0)},
    {140, 1584, A4_PLL(1, 132,0)},
    {141, 1596, A4_PLL(1, 133,0)}
}; 
#else
const int g_pll_list[PLL_LV_NUM] = {
    120 , 
    121 , 
    123 , 
    124 , 
    126 , 
    127 , 
    129 , 
    130 , 
    132 , 
    133 , 
    135 , 
    136 , 
    138 , 
    139 , 
    141 , 
    142 , 
    144 , 
    145 , 
    147 , 
    148 , 
    150 , 
    153 , 
    156 , 
    159 , 
    162 , 
    165 , 
    168 , 
    171 , 
    174 , 
    177 , 
    180 , 
    183 , 
    186 , 
    189 , 
    192 , 
    195 , 
    198 , 
    201 , 
    204 , 
    207 , 
    210 , 
    213 , 
    216 , 
    219 , 
    222 , 
    225 , 
    228 , 
    231 , 
    234 , 
    237 , 
    240 , 
    241 , 
    243 , 
    244 , 
    246 , 
    247 , 
    249 , 
    250 , 
    252 , 
    253 , 
    255 , 
    256 , 
    258 , 
    259 , 
    261 , 
    262 , 
    264 , 
    265 , 
    267 , 
    268 , 
    270 , 
    271 , 
    273 , 
    274 , 
    276 , 
    277 , 
    279 , 
    280 , 
    282 , 
    283 , 
    285 , 
    286 , 
    288 , 
    289 , 
    291 , 
    292 , 
    294 , 
    295 , 
    297 , 
    298 , 
    300 , 
    303 , 
    306 , 
    309 , 
    312 , 
    315 , 
    318 , 
    321 , 
    324 , 
    327 , 
    330 , 
    333 , 
    336 , 
    339 , 
    342 , 
    345 , 
    348 , 
    351 , 
    354 , 
    357 , 
    360 , 
    363 , 
    366 , 
    369 , 
    372 , 
    375 , 
    378 , 
    381 , 
    384 , 
    387 , 
    390 , 
    393 , 
    396 , 
    399 , 
    402 , 
    405 , 
    408 , 
    411 , 
    414 , 
    417 , 
    420 , 
    423 , 
    426 , 
    429 , 
    432 , 
    435 , 
    438 , 
    441 , 
    444 , 
    447 , 
    450 , 
    453 , 
    456 , 
    459 , 
    462 , 
    465 , 
    468 , 
    471 , 
    474 , 
    477 , 
    480 , 
    483 , 
    486 , 
    489 , 
    492 , 
    495 , 
    498 , 
    501 , 
    504 , 
    507 , 
    510 , 
    513 , 
    516 , 
    519 , 
    522 , 
    525 , 
    528 , 
    531 , 
    534 , 
    537 , 
    540 , 
    543 , 
    546 , 
    549 , 
    552 , 
    555 , 
    558 , 
    561 , 
    564 , 
    567 , 
    570 , 
    573 , 
    576 , 
    579 , 
    582 , 
    585 , 
    588 , 
    591 , 
    594 , 
    597 , 
    600 , 
    606 , 
    612 , 
    618 , 
    624 , 
    630 , 
    636 , 
    642 , 
    648 , 
    654 , 
    660 , 
    666 , 
    672 , 
    678 , 
    684 , 
    690 , 
    696 , 
    702 , 
    708 , 
    714 , 
    720 , 
    726 , 
    732 , 
    738 , 
    744 , 
    750 , 
    756 , 
    762 , 
    768 , 
    774 , 
    780 , 
    786 , 
    792 , 
    798 , 
    804 , 
    810 , 
    816 , 
    822 , 
    828 , 
    834 , 
    840 , 
    846 , 
    852 , 
    858 , 
    864 , 
    870 , 
    876 , 
    882 , 
    888 , 
    894 , 
    900 , 
    906 , 
    912 , 
    918 , 
    924 , 
    930 , 
    936 , 
    942 , 
    948 , 
    954 , 
    960 , 
    966 , 
    972 , 
    978 , 
    984 , 
    990 , 
    996 , 
    1002, 
    1008, 
    1014, 
    1020, 
    1026, 
    1032, 
    1038, 
    1044, 
    1050, 
    1056, 
    1062, 
    1068, 
    1074, 
    1080, 
    1086, 
    1092, 
    1098, 
    1104, 
    1110, 
    1116, 
    1122, 
    1128, 
    1134, 
    1140, 
    1146, 
    1152, 
    1158, 
    1164, 
    1170, 
    1176, 
    1182, 
    1188, 
    1194, 
    1200, 
    1212, 
    1224, 
    1236, 
    1248, 
    1260, 
    1272, 
    1284, 
    1296, 
    1308, 
    1320, 
    1332, 
    1344, 
    1356, 
    1368, 
    1380, 
    1392, 
    1404, 
    1416, 
    1428, 
    1440, 
    1452, 
    1464, 
    1476, 
    1488, 
    1500, 
    1512, 
    1524, 
    1536, 
    1548, 
    1560, 
    1572, 
    1584, 
    1596  
};

 struct PLL_Clock PLL_Clk_12Mhz[PLL_LV_NUM] = {
    {  0, 120 , A4_PLL(1, 80 , 3)},
    {  1, 121 , A4_PLL(1, 81 , 3)},
    {  2, 123 , A4_PLL(1, 82 , 3)},
    {  3, 124 , A4_PLL(1, 83 , 3)},
    {  4, 126 , A4_PLL(1, 84 , 3)},
    {  5, 127 , A4_PLL(1, 85 , 3)},
    {  6, 129 , A4_PLL(1, 86 , 3)},
    {  7, 130 , A4_PLL(1, 87 , 3)},
    {  8, 132 , A4_PLL(1, 88 , 3)},
    {  9, 133 , A4_PLL(1, 89 , 3)},
    { 10, 135 , A4_PLL(1, 90 , 3)},
    { 11, 136 , A4_PLL(1, 91 , 3)},
    { 12, 138 , A4_PLL(1, 92 , 3)},
    { 13, 139 , A4_PLL(1, 93 , 3)},
    { 14, 141 , A4_PLL(1, 94 , 3)},
    { 15, 142 , A4_PLL(1, 95 , 3)},
    { 16, 144 , A4_PLL(1, 96 , 3)},
    { 17, 145 , A4_PLL(1, 97 , 3)},
    { 18, 147 , A4_PLL(1, 98 , 3)},
    { 19, 148 , A4_PLL(1, 99 , 3)},
    { 20, 150 , A4_PLL(1, 50 , 2)},
    { 21, 153 , A4_PLL(1, 51 , 2)},
    { 22, 156 , A4_PLL(1, 52 , 2)},
    { 23, 159 , A4_PLL(1, 53 , 2)},
    { 24, 162 , A4_PLL(1, 54 , 2)},
    { 25, 165 , A4_PLL(1, 55 , 2)},
    { 26, 168 , A4_PLL(1, 56 , 2)},
    { 27, 171 , A4_PLL(1, 57 , 2)},
    { 28, 174 , A4_PLL(1, 58 , 2)},
    { 29, 177 , A4_PLL(1, 59 , 2)},
    { 30, 180 , A4_PLL(1, 60 , 2)},
    { 31, 183 , A4_PLL(1, 61 , 2)},
    { 32, 186 , A4_PLL(1, 62 , 2)},
    { 33, 189 , A4_PLL(1, 63 , 2)},
    { 34, 192 , A4_PLL(1, 64 , 2)},
    { 35, 195 , A4_PLL(1, 65 , 2)},
    { 36, 198 , A4_PLL(1, 66 , 2)},
    { 37, 201 , A4_PLL(1, 67 , 2)},
    { 38, 204 , A4_PLL(1, 68 , 2)},
    { 39, 207 , A4_PLL(1, 69 , 2)},
    { 40, 210 , A4_PLL(1, 70 , 2)},
    { 41, 213 , A4_PLL(1, 71 , 2)},
    { 42, 216 , A4_PLL(1, 72 , 2)},
    { 43, 219 , A4_PLL(1, 73 , 2)},
    { 44, 222 , A4_PLL(1, 74 , 2)},
    { 45, 225 , A4_PLL(1, 75 , 2)},
    { 46, 228 , A4_PLL(1, 76 , 2)},
    { 47, 231 , A4_PLL(1, 77 , 2)},
    { 48, 234 , A4_PLL(1, 78 , 2)},
    { 49, 237 , A4_PLL(1, 79 , 2)},
    { 50, 240 , A4_PLL(2, 160, 2)},
    { 51, 241 , A4_PLL(2, 161, 2)},
    { 52, 243 , A4_PLL(2, 162, 2)},
    { 53, 244 , A4_PLL(2, 163, 2)},
    { 54, 246 , A4_PLL(2, 164, 2)},
    { 55, 247 , A4_PLL(2, 165, 2)},
    { 56, 249 , A4_PLL(2, 166, 2)},
    { 57, 250 , A4_PLL(2, 167, 2)},
    { 58, 252 , A4_PLL(2, 168, 2)},
    { 59, 253 , A4_PLL(2, 169, 2)},
    { 60, 255 , A4_PLL(2, 170, 2)},
    { 61, 256 , A4_PLL(2, 171, 2)},
    { 62, 258 , A4_PLL(2, 172, 2)},
    { 63, 259 , A4_PLL(2, 173, 2)},
    { 64, 261 , A4_PLL(2, 174, 2)},
    { 65, 262 , A4_PLL(2, 175, 2)},
    { 66, 264 , A4_PLL(2, 176, 2)},
    { 67, 265 , A4_PLL(2, 177, 2)},
    { 68, 267 , A4_PLL(2, 178, 2)},
    { 69, 268 , A4_PLL(2, 179, 2)},
    { 70, 270 , A4_PLL(2, 180, 2)},
    { 71, 271 , A4_PLL(2, 181, 2)},
    { 72, 273 , A4_PLL(2, 182, 2)},
    { 73, 274 , A4_PLL(2, 183, 2)},
    { 74, 276 , A4_PLL(2, 184, 2)},
    { 75, 277 , A4_PLL(2, 185, 2)},
    { 76, 279 , A4_PLL(2, 186, 2)},
    { 77, 280 , A4_PLL(2, 187, 2)},
    { 78, 282 , A4_PLL(2, 188, 2)},
    { 79, 283 , A4_PLL(2, 189, 2)},
    { 80, 285 , A4_PLL(2, 190, 2)},
    { 81, 286 , A4_PLL(2, 191, 2)},
    { 82, 288 , A4_PLL(2, 192, 2)},
    { 83, 289 , A4_PLL(2, 193, 2)},
    { 84, 291 , A4_PLL(2, 194, 2)},
    { 85, 292 , A4_PLL(2, 195, 2)},
    { 86, 294 , A4_PLL(2, 196, 2)},
    { 87, 295 , A4_PLL(2, 197, 2)},
    { 88, 297 , A4_PLL(2, 198, 2)},
    { 89, 298 , A4_PLL(2, 199, 2)},
    { 90, 300 , A4_PLL(2, 100, 1)},
    { 91, 303 , A4_PLL(2, 101, 1)},
    { 92, 306 , A4_PLL(2, 102, 1)},
    { 93, 309 , A4_PLL(2, 103, 1)},
    { 94, 312 , A4_PLL(2, 104, 1)},
    { 95, 315 , A4_PLL(2, 105, 1)},
    { 96, 318 , A4_PLL(2, 106, 1)},
    { 97, 321 , A4_PLL(2, 107, 1)},
    { 98, 324 , A4_PLL(2, 108, 1)},
    { 99, 327 , A4_PLL(2, 109, 1)},
    {100, 330 , A4_PLL(2, 110, 1)},
    {101, 333 , A4_PLL(2, 111, 1)},
    {102, 336 , A4_PLL(2, 112, 1)},
    {103, 339 , A4_PLL(2, 113, 1)},
    {104, 342 , A4_PLL(2, 114, 1)},
    {105, 345 , A4_PLL(2, 115, 1)},
    {106, 348 , A4_PLL(2, 116, 1)},
    {107, 351 , A4_PLL(2, 117, 1)},
    {108, 354 , A4_PLL(2, 118, 1)},
    {109, 357 , A4_PLL(2, 119, 1)},
    {110, 360 , A4_PLL(2, 120, 1)},
    {111, 363 , A4_PLL(2, 121, 1)},
    {112, 366 , A4_PLL(2, 122, 1)},
    {113, 369 , A4_PLL(2, 123, 1)},
    {114, 372 , A4_PLL(2, 124, 1)},
    {115, 375 , A4_PLL(2, 125, 1)},
    {116, 378 , A4_PLL(2, 126, 1)},
    {117, 381 , A4_PLL(2, 127, 1)},
    {118, 384 , A4_PLL(2, 128, 1)},
    {119, 387 , A4_PLL(2, 129, 1)},
    {120, 390 , A4_PLL(2, 130, 1)},
    {121, 393 , A4_PLL(2, 131, 1)},
    {122, 396 , A4_PLL(2, 132, 1)},
    {123, 399 , A4_PLL(2, 133, 1)},
    {124, 402 , A4_PLL(2, 134, 1)},
    {125, 405 , A4_PLL(2, 135, 1)},
    {126, 408 , A4_PLL(2, 136, 1)},
    {127, 411 , A4_PLL(2, 137, 1)},
    {128, 414 , A4_PLL(2, 138, 1)},
    {129, 417 , A4_PLL(2, 139, 1)},
    {130, 420 , A4_PLL(2, 140, 1)},
    {131, 423 , A4_PLL(2, 141, 1)},
    {132, 426 , A4_PLL(2, 142, 1)},
    {133, 429 , A4_PLL(2, 143, 1)},
    {134, 432 , A4_PLL(2, 144, 1)},
    {135, 435 , A4_PLL(2, 145, 1)},
    {136, 438 , A4_PLL(2, 146, 1)},
    {137, 441 , A4_PLL(2, 147, 1)},
    {138, 444 , A4_PLL(2, 148, 1)},
    {139, 447 , A4_PLL(2, 149, 1)},
    {140, 450 , A4_PLL(2, 150, 1)},
    {141, 453 , A4_PLL(2, 151, 1)},
    {142, 456 , A4_PLL(2, 152, 1)},
    {143, 459 , A4_PLL(2, 153, 1)},
    {144, 462 , A4_PLL(2, 154, 1)},
    {145, 465 , A4_PLL(2, 155, 1)},
    {146, 468 , A4_PLL(2, 156, 1)},
    {147, 471 , A4_PLL(2, 157, 1)},
    {148, 474 , A4_PLL(2, 158, 1)},
    {149, 477 , A4_PLL(2, 159, 1)},
    {150, 480 , A4_PLL(2, 160, 1)},
    {151, 483 , A4_PLL(2, 161, 1)},
    {152, 486 , A4_PLL(2, 162, 1)},
    {153, 489 , A4_PLL(2, 163, 1)},
    {154, 492 , A4_PLL(2, 164, 1)},
    {155, 495 , A4_PLL(2, 165, 1)},
    {156, 498 , A4_PLL(2, 166, 1)},
    {157, 501 , A4_PLL(2, 167, 1)},
    {158, 504 , A4_PLL(2, 168, 1)},
    {159, 507 , A4_PLL(2, 169, 1)},
    {160, 510 , A4_PLL(2, 170, 1)},
    {161, 513 , A4_PLL(2, 171, 1)},
    {162, 516 , A4_PLL(2, 172, 1)},
    {163, 519 , A4_PLL(2, 173, 1)},
    {164, 522 , A4_PLL(2, 174, 1)},
    {165, 525 , A4_PLL(2, 175, 1)},
    {166, 528 , A4_PLL(2, 176, 1)},
    {167, 531 , A4_PLL(2, 177, 1)},
    {168, 534 , A4_PLL(2, 178, 1)},
    {169, 537 , A4_PLL(2, 179, 1)},
    {170, 540 , A4_PLL(2, 180, 1)},
    {171, 543 , A4_PLL(2, 181, 1)},
    {172, 546 , A4_PLL(2, 182, 1)},
    {173, 549 , A4_PLL(2, 183, 1)},
    {174, 552 , A4_PLL(2, 184, 1)},
    {175, 555 , A4_PLL(2, 185, 1)},
    {176, 558 , A4_PLL(2, 186, 1)},
    {177, 561 , A4_PLL(2, 187, 1)},
    {178, 564 , A4_PLL(2, 188, 1)},
    {179, 567 , A4_PLL(2, 189, 1)},
    {180, 570 , A4_PLL(2, 190, 1)},
    {181, 573 , A4_PLL(2, 191, 1)},
    {182, 576 , A4_PLL(2, 192, 1)},
    {183, 579 , A4_PLL(2, 193, 1)},
    {184, 582 , A4_PLL(2, 194, 1)},
    {185, 585 , A4_PLL(2, 195, 1)},
    {186, 588 , A4_PLL(2, 196, 1)},
    {187, 591 , A4_PLL(2, 197, 1)},
    {188, 594 , A4_PLL(2, 198, 1)},
    {189, 597 , A4_PLL(2, 199, 1)},
    {190, 600 , A4_PLL(2, 100, 0)},
    {191, 606 , A4_PLL(2, 101, 0)},
    {192, 612 , A4_PLL(2, 102, 0)},
    {193, 618 , A4_PLL(2, 103, 0)},
    {194, 624 , A4_PLL(2, 104, 0)},
    {195, 630 , A4_PLL(2, 105, 0)},
    {196, 636 , A4_PLL(2, 106, 0)},
    {197, 642 , A4_PLL(2, 107, 0)},
    {198, 648 , A4_PLL(2, 108, 0)},
    {199, 654 , A4_PLL(2, 109, 0)},
    {200, 660 , A4_PLL(2, 110, 0)},
    {201, 666 , A4_PLL(2, 111, 0)},
    {202, 672 , A4_PLL(2, 112, 0)},
    {203, 678 , A4_PLL(2, 113, 0)},
    {204, 684 , A4_PLL(2, 114, 0)},
    {205, 690 , A4_PLL(2, 115, 0)},
    {206, 696 , A4_PLL(2, 116, 0)},
    {207, 702 , A4_PLL(2, 117, 0)},
    {208, 708 , A4_PLL(2, 118, 0)},
    {209, 714 , A4_PLL(2, 119, 0)},
    {210, 720 , A4_PLL(2, 120, 0)},
    {211, 726 , A4_PLL(2, 121, 0)},
    {212, 732 , A4_PLL(2, 122, 0)},
    {213, 738 , A4_PLL(2, 123, 0)},
    {214, 744 , A4_PLL(2, 124, 0)},
    {215, 750 , A4_PLL(2, 125, 0)},
    {216, 756 , A4_PLL(2, 126, 0)},
    {217, 762 , A4_PLL(2, 127, 0)},
    {218, 768 , A4_PLL(2, 128, 0)},
    {219, 774 , A4_PLL(2, 129, 0)},
    {220, 780 , A4_PLL(2, 130, 0)},
    {221, 786 , A4_PLL(2, 131, 0)},
    {222, 792 , A4_PLL(2, 132, 0)},
    {223, 798 , A4_PLL(2, 133, 0)},
    {224, 804 , A4_PLL(2, 134, 0)},
    {225, 810 , A4_PLL(2, 135, 0)},
    {226, 816 , A4_PLL(2, 136, 0)},
    {227, 822 , A4_PLL(2, 137, 0)},
    {228, 828 , A4_PLL(2, 138, 0)},
    {229, 834 , A4_PLL(2, 139, 0)},
    {230, 840 , A4_PLL(2, 140, 0)},
    {231, 846 , A4_PLL(2, 141, 0)},
    {232, 852 , A4_PLL(2, 142, 0)},
    {233, 858 , A4_PLL(2, 143, 0)},
    {234, 864 , A4_PLL(2, 144, 0)},
    {235, 870 , A4_PLL(2, 145, 0)},
    {236, 876 , A4_PLL(2, 146, 0)},
    {237, 882 , A4_PLL(2, 147, 0)},
    {238, 888 , A4_PLL(2, 148, 0)},
    {239, 894 , A4_PLL(2, 149, 0)},
    {240, 900 , A4_PLL(2, 150, 0)},
    {241, 906 , A4_PLL(2, 151, 0)},
    {242, 912 , A4_PLL(2, 152, 0)},
    {243, 918 , A4_PLL(2, 153, 0)},
    {244, 924 , A4_PLL(2, 154, 0)},
    {245, 930 , A4_PLL(2, 155, 0)},
    {246, 936 , A4_PLL(2, 156, 0)},
    {247, 942 , A4_PLL(2, 157, 0)},
    {248, 948 , A4_PLL(2, 158, 0)},
    {249, 954 , A4_PLL(2, 159, 0)},
    {250, 960 , A4_PLL(2, 160, 0)},
    {251, 966 , A4_PLL(2, 161, 0)},
    {252, 972 , A4_PLL(2, 162, 0)},
    {253, 978 , A4_PLL(2, 163, 0)},
    {254, 984 , A4_PLL(2, 164, 0)},
    {255, 990 , A4_PLL(2, 165, 0)},
    {256, 996 , A4_PLL(2, 166, 0)},
    {257, 1002, A4_PLL(2, 167, 0)},
    {258, 1008, A4_PLL(2, 168, 0)},
    {259, 1014, A4_PLL(2, 169, 0)},
    {260, 1020, A4_PLL(2, 170, 0)},
    {261, 1026, A4_PLL(2, 171, 0)},
    {262, 1032, A4_PLL(2, 172, 0)},
    {263, 1038, A4_PLL(2, 173, 0)},
    {264, 1044, A4_PLL(2, 174, 0)},
    {265, 1050, A4_PLL(2, 175, 0)},
    {266, 1056, A4_PLL(2, 176, 0)},
    {267, 1062, A4_PLL(2, 177, 0)},
    {268, 1068, A4_PLL(2, 178, 0)},
    {269, 1074, A4_PLL(2, 179, 0)},
    {270, 1080, A4_PLL(2, 180, 0)},
    {271, 1086, A4_PLL(2, 181, 0)},
    {272, 1092, A4_PLL(2, 182, 0)},
    {273, 1098, A4_PLL(2, 183, 0)},
    {274, 1104, A4_PLL(2, 184, 0)},
    {275, 1110, A4_PLL(2, 185, 0)},
    {276, 1116, A4_PLL(2, 186, 0)},
    {277, 1122, A4_PLL(2, 187, 0)},
    {278, 1128, A4_PLL(2, 188, 0)},
    {279, 1134, A4_PLL(2, 189, 0)},
    {280, 1140, A4_PLL(2, 190, 0)},
    {281, 1146, A4_PLL(2, 191, 0)},
    {282, 1152, A4_PLL(2, 192, 0)},
    {283, 1158, A4_PLL(2, 193, 0)},
    {284, 1164, A4_PLL(2, 194, 0)},
    {285, 1170, A4_PLL(2, 195, 0)},
    {286, 1176, A4_PLL(2, 196, 0)},
    {287, 1182, A4_PLL(2, 197, 0)},
    {288, 1188, A4_PLL(2, 198, 0)},
    {289, 1194, A4_PLL(2, 199, 0)},
    {290, 1200, A4_PLL(1, 100, 0)},
    {291, 1212, A4_PLL(1, 101, 0)},
    {292, 1224, A4_PLL(1, 102, 0)},
    {293, 1236, A4_PLL(1, 103, 0)},
    {294, 1248, A4_PLL(1, 104, 0)},
    {295, 1260, A4_PLL(1, 105, 0)},
    {296, 1272, A4_PLL(1, 106, 0)},
    {297, 1284, A4_PLL(1, 107, 0)},
    {298, 1296, A4_PLL(1, 108, 0)},
    {299, 1308, A4_PLL(1, 109, 0)},
    {300, 1320, A4_PLL(1, 110, 0)},
    {301, 1332, A4_PLL(1, 111, 0)},
    {302, 1344, A4_PLL(1, 112, 0)},
    {303, 1356, A4_PLL(1, 113, 0)},
    {304, 1368, A4_PLL(1, 114, 0)},
    {305, 1380, A4_PLL(1, 115, 0)},
    {306, 1392, A4_PLL(1, 116, 0)},
    {307, 1404, A4_PLL(1, 117, 0)},
    {308, 1416, A4_PLL(1, 118, 0)},
    {309, 1428, A4_PLL(1, 119, 0)},
    {310, 1440, A4_PLL(1, 120, 0)},
    {311, 1452, A4_PLL(1, 121, 0)},
    {312, 1464, A4_PLL(1, 122, 0)},
    {313, 1476, A4_PLL(1, 123, 0)},
    {314, 1488, A4_PLL(1, 124, 0)},
    {315, 1500, A4_PLL(1, 125, 0)},
    {316, 1512, A4_PLL(1, 126, 0)},
    {317, 1524, A4_PLL(1, 127, 0)},
    {318, 1536, A4_PLL(1, 128, 0)},
    {319, 1548, A4_PLL(1, 129, 0)},
    {320, 1560, A4_PLL(1, 130, 0)},
    {321, 1572, A4_PLL(1, 131, 0)},
    {322, 1584, A4_PLL(1, 132, 0)},
    {323, 1596, A4_PLL(1, 133, 0)},
};
#endif

int A1_ConfigA1PLLClock(int optPll)
{
    int i;
    int A1Pll;

    if(optPll>0)
    {
        A1Pll=0;
        if(optPll<=PLL_Clk_12Mhz[0].speedMHz) 
        {
            A1Pll=0; //found
        }
        else
        {
            for(i=1;i<142;i++)
            {
                if((optPll<PLL_Clk_12Mhz[i].speedMHz)&&(optPll>=PLL_Clk_12Mhz[i-1].speedMHz))
                {
                    A1Pll=i-1; //found
                    break;
                }
            }
        }

        applog(LOG_NOTICE, "A1 = %d,%d, Clock = %dMHz",optPll,A1Pll,PLL_Clk_12Mhz[A1Pll].speedMHz);
    }

    return A1Pll;
}


void A1_SetA1PLLClock(struct A1_chain *a1,int pllClkIdx)
{
    struct A1_chip *chip;
    uint32_t regPll;
    uint8_t rxbuf[12];
    
    uint8_t fix_val[8] = {0x00, 0x00, 0x00, 0xA8, 0x00, 0xE4, 0xFF, 0xFF}; 
    

    assert(a1->chips != NULL);
    assert((pllClkIdx > 0) && (pllClkIdx < A5_PLL_CLOCK_MAX));

    regPll = PLL_Clk_12Mhz[pllClkIdx].pll_reg;

    chip = &a1->chips[0];
    memcpy(chip->reg,     (uint8_t*)&regPll + 3 ,1);
    memcpy(chip->reg + 1, (uint8_t*)&regPll + 2 ,1);
    memcpy(chip->reg + 2, (uint8_t*)&regPll + 1 ,1);
    memcpy(chip->reg + 3, (uint8_t*)&regPll + 0 ,1);
    memcpy(chip->reg + 4, fix_val , 8);
    
    //chip->reg[6] = (asic_vol_set&0xff00)>>8;
    //chip->reg[7] = asic_vol_set&0x00ff;
    //chip->reg[8] = pllClkIdx;
    //chip->reg[9] = pllClkIdx;
    //applog(LOG_INFO,"pllClkIdx is %d %d", chip->reg[8],chip->reg[9]); 

    inno_cmd_write_reg(a1, ADDR_BROADCAST, chip->reg);
    usleep(100000);
    inno_cmd_read_reg(a1, ADDR_BROADCAST, rxbuf);
    hexdump("read value", rxbuf, 12);   
    
}


